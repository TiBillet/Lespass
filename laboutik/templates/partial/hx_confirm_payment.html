{% load static i18n %}

<div id="confirm" class="BF-col">
	<h1>{% translate "Confirmez le paiement par" %} {{ payment_translation }}</h1>
	{% if method == 'espece' %}
	<div id="given-sum-container" class="BF-col">
		<div class="info-sum-given">{% translate "somme donnée" %}</div>
		<input type="number" id="given-sum" class="addition-fractionnee-input">
		<small id="given-sum-msg-erreur"></small>
	</div>
	{% endif %}

	<div id="confirm-action-container">
		<!-- include bt_return.html -->
		<c-bt.return selector="#confirm" layer="2" />

		<div id="bt-valider-layer2" class="bt-basic-container bt-basic-bg-success" onclick="confirmPayment('{{ method }}')">
			<div class="bt-basic-icon">
				<i class="fas fa-check-circle"></i>
			</div>
			<div class="bt-basic-text">
				<div>{% translate "Valider" %}</div>
			</div>
		</div>
	</div>
</div>

<script>
	function confirmPayment(method) {
		if (method === 'espece') {
			// récupère la somme donée
			const givenSum = Number(document.querySelector('#given-sum').value) * 100
			// update given sum in form
			askAdditionManageForm('updateInput', '#addition-given-sum', givenSum)
		}
		// submit
		askAdditionManageForm('submit', null, 'hx_payment')
	}
</script>
<style>
	#confirm {
		position: absolute;
		left: 0;
		top: 0;
		width: 100%;
		height: 100%;
		color: var(--blanc01);
		font-size: 1.5rem;
		text-align: center;
		background-color: var(--bleu09);
		z-index: 900;
	}

	#confirm-action-container {
		display: flex;
		flex-direction: row;
		justify-content: space-around;
		align-items: center;
		margin-top: 2rem;
	}

	.info-sum-given {
		font-size: 1.5rem;
		font-weight: bold;
	}

	.addition-fractionnee-input {
		height: 60px;
		margin-top: 2rem;
		font-size: 1rem;
	}

	#bt-valider-layer2 {
		margin-left: 8px;
	}
</style>